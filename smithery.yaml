name: ideogram-mcp-server
version: 3.0.1

# Build configuration
build:
  dockerfile: Dockerfile
  context: .
  timeout: 600s # 10 minute timeout for builds

  # Build arguments
  args:
    NODE_VERSION: "20"
    BUN_VERSION: "1.2.21"

# Runtime configuration
runtime:
  port: 3000

  # Environment variables
  env:
    NODE_ENV: production
    NODE_OPTIONS: "--max-old-space-size=512"

# Health check
healthcheck:
  path: /health
  interval: 30s
  timeout: 10s
  retries: 3
  start_period: 30s

# Resource limits - reduced for faster startup
resources:
  memory: "256Mi"
  cpu: "0.3"

# Simplified build process
build_config:
  cache: true
  parallel: true
  network_timeout: 300s

# Dependencies
dependencies:
  - name: node
    version: ">=20.0.0"
  - name: bun
    version: ">=1.2.21"

# Deployment configuration
deploy:
  strategy: rolling
  replicas: 1
  timeout: 300s

# Monitoring - simplified
monitoring:
  enabled: false # Disable to reduce startup overhead

